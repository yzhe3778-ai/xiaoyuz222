# 规则问题记录

> 记录开发过程中遇到的规则问题和改进建议
> 与 CHANGELOG.md 联动管理

---

## 问题处理流程

```
1. 记录问题（状态：待评审）
2. 周/月评审讨论
3. 决定采纳/拒绝/延后
4. 如采纳：
   - 修改规则文件
   - 更新 CHANGELOG.md（新增版本）
   - 更新本文件状态为"已采纳"
   - 填写关联版本号
5. 如拒绝：
   - 更新状态为"已拒绝"
   - 填写拒绝原因
```

---

## 评审节奏

| 类型     | 频率   | 内容          |
| -------- | ------ | ------------- |
| 快速记录 | 随时   | 添加问题条目  |
| 周评审   | 每周五 | 标记优先级    |
| 月评审   | 每月末 | 决策采纳/拒绝 |
| 季度评审 | 季度末 | 版本升级      |

---

## 问题模板

```markdown
### 问题 #XXX

- 日期：YYYY-MM-DD
- 提出人：[姓名]
- 规则：[规则文件:规则名称]
- 问题：[具体问题描述]
- 建议：[改进建议]
- 优先级：高 / 中 / 低
- 状态：待评审 / 已采纳 / 已拒绝 / 延后
- 关联版本：vX.X.X（采纳后填写）
- 备注：[拒绝原因或其他说明]
```

---

## 2026-01 问题记录

### 问题 #001

- 日期：2026-01-28
- 提出人：系统
- 规则：项目初始化
- 问题：首次建立规则体系
- 建议：按需调整规则内容
- 优先级：高
- 状态：已采纳
- 关联版本：v1.0.0
- 备注：初始化完成

### 问题 #002

- 日期：2026-01-28
- 提出人：用户朋友
- 规则：全局
- 问题：指南与实际落地结构不一致
- 建议：补充完整的落地实施规范
- 优先级：高
- 状态：已采纳
- 关联版本：v1.0.1
- 备注：新增 99-落地实施规范.md

### 问题 #003

- 日期：2026-01-28
- 提出人：用户朋友
- 规则：自动化配置（package.json/ci.yml/cspell.json）
- 问题：多处配置无法正常运行
  1. CI 用 npm ci 但无 package-lock.json
  2. markdown-link-check 依赖未安装
  3. lint-staged 只匹配根目录
  4. Windows 单引号 glob 不兼容
  5. cspell 会报中文规则文件拼写问题
- 建议：修复所有配置问题
- 优先级：高
- 状态：已采纳
- 关联版本：v1.0.2
- 备注：
  - package.json: 添加依赖、改双引号、扩展glob
  - ci.yml: npm ci → npm install
  - cspell.json: 忽略 .agent/rules 和 feedback

### 问题 #004

- 日期：2026-01-28
- 提出人：朋友C
- 规则：整体架构
- 问题：缺少 RAG 知识库和自动化上下文支持
  1. 没有知识库目录存放项目参考资料
  2. 没有提示词模板库
  3. 依赖手动引用规则，缺少自动加载
  4. 最佳实践缺少知识库使用建议
- 建议：增加 knowledge/prompts 目录和自动上下文配置
- 优先级：中
- 状态：已采纳
- 关联版本：v1.0.3
- 备注：
  - 新增 .agent/knowledge/ 目录和 README
  - 新增 .agent/prompts/ 目录和模板库
  - 新增 .cursorrules 和 .windsurfrules 自动配置
  - 更新 00-project-overview.md

### 问题 #005

- 日期：2026-01-28
- 提出人：朋友B
- 规则：自动化配置稳定性
- 问题：可选的稳定性优化
  1. lint:links 容易因网络波动失败
  2. 全量 \*.md 会覆盖参考资料
  3. npm install 不可复现
  4. 拼写检查只在 CI，可更早发现
- 建议：添加忽略文件、锁文件、pre-commit 拼写检查
- 优先级：低
- 状态：已采纳
- 关联版本：v1.0.4
- 备注：
  - 新增 .markdown-link-check.json（白名单+重试）
  - 新增 .markdownlintignore 和 .prettierignore
  - 生成 package-lock.json，CI 改回 npm ci
  - lint-staged 添加 cspell 检查

### 问题 #006

- 日期：2026-01-28
- 提出人：朋友B（复查）
- 规则：版本一致性和配置兼容性
- 问题：
  1. 版本标识不一致（00/99 仍是 1.0.0）
  2. timeout 字符串可能不兼容
  3. lint:links 会扫到非 git 跟踪文件
- 建议：统一版本号、timeout 改毫秒、lint:links 改为 git 跟踪文件
- 优先级：低
- 状态：已采纳
- 关联版本：v1.0.5
- 备注：
  - 00-project-overview.md 版本 → 1.0.5
  - 99-落地实施规范.md 版本 → 1.0.5
  - .markdown-link-check.json timeout → 10000ms
  - lint:links → git ls-files

---

## 待评审问题

（暂无）

---

## 已拒绝问题

（暂无）

---

## 延后问题

（暂无）

---

## 统计

| 月份    | 提出 | 采纳 | 拒绝 | 延后 | 采纳率 |
| ------- | ---- | ---- | ---- | ---- | ------ |
| 2026-01 | 6    | 6    | 0    | 0    | 100%   |

---

_请在遇到规则问题时添加记录_
_每次采纳后同步更新 CHANGELOG.md_
